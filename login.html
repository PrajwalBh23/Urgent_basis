<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Newzoly</title>
    <link rel="stylesheet" href="./Navbar.css">
    <link rel="stylesheet" href="./login.css">
    <script src="./script.js" defer></script>
</head>

<body>
    <div class="contain">
        <div class="contain_all">
            <div class="container">
                <div class="logo"><img src="./images/national-emblem.png" alt=""><span class="text">Newzoly</span></div>
                <div class="right"><img src="./images/person.png" alt="" id="person-icon"><img src="./images/notify.png"
                        alt=""></div>
            </div>
        </div>
        <!-- Dialog box -->
        <div id="dialog-box" class="dialog-box">
            <a id="login-link" href="#">Login</a>
            <a id="signup-link" href="#">Sign up</a>
        </div>
        <div class="box">
            <h2>Log In</h2>
            <form id="login-form">
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <div class="button">
                    <button style="margin-right: 10px;" type="submit">Login</button>
                    <button type="button" onclick="openForgetPasswordPage()">Forgot Password</button>
                </div>
            </form>

        </div>
    </div>
    <script>
        function openForgetPasswordPage() {
            window.location.href = 'forget.html';
        }

       
        const handleLogin = (event) => {
            event.preventDefault(); // Prevent the default form submission

            // Get user input values
            const userEmail = document.getElementById('email').value;
            const userPassword = document.getElementById('password').value;

            // Retrieve user data from local storage
            const userData = localStorage.getItem('usersData');

            if (userData) {
                // Parse the user data JSON string to an object
                const users = JSON.parse(userData);

                // Check if the user email exists in the stored data
                if (users.hasOwnProperty(userEmail)) {
                    // Check if the entered password matches the stored password
                    if (users[userEmail] === userPassword) {
                        alert('Login successful!'); // Password is correct
                        window.location.href = 'index.html';
                        // Redirect to the dashboard or another page if needed
                    } else {
                        alert('Incorrect password. Please try again.'); // Password is incorrect
                    }
                } else {
                    alert('User not found. Please sign up.'); // Email not found in stored data
                }
            } else {
                alert('No user data found. Please sign up.'); // No user data found in local storage
            }
        };

        // Add event listener to the login form
        document.getElementById('login-form').addEventListener('submit', handleLogin);


    </script>
</body>

</html>